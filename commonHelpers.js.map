{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/x-octagon.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(query, per_page, page) {\n\n    const KEY = '42515164-6d66b652ac661a4b366139ff0';\n    const BASE_URI = 'https://pixabay.com/api/';\n    const IMAGE_TYPE = 'photo';\n    const ORIENTATION = 'horizontal';\n    const SAFESEARCH = true;\n    const LINK = `${BASE_URI}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&page=${page}&per_page=${per_page}`;\n  \n    try {\n        const response = await axios.get(LINK);\n        return response.data\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            titleColor: '#fff',\n            message: 'Error while fetching images from Pixabay!!!',\n            messageColor: '#fafafb',\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n            theme: 'dark',\n            iconUrl: errorIcon,\n            maxWidth: '432px',\n        }) ;\n    }\n};","export function createGalleryMarkup(images) {\n    return images\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n            `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                data-source=\"${largeImageURL}\"\n                alt=\"${tags}\"\n                />\n                </a>\n                <div class=\"image-info\">\n                    <ul class=\"image-info-list\">\n                        <li class=\"image-item\">\n                            <h2 class=\"image-text\">Likes</h2>\n                            <p class=\"image-quantity\">${likes}</p>\n                        </li>\n                        <li class=\"image-item\">\n                            <h2 class=\"image-text\">Views</h2>\n                            <p class=\"image-quantity\">${views}</p>\n                        </li>\n                        <li class=\"image-item\">\n                            <h2 class=\"image-text\">Comments</h2>\n                            <p class=\"image-quantity\">${comments}</p>\n                        </li>\n                        <li class=\"image-item\">\n                            <h2 class=\"image-text\">Downloads</h2>\n                            <p class=\"image-quantity\">${downloads}</p>\n                        </li>\n                    </ul>\n                </div>\n            </li>`)\n        .join(\"\");\n}","export default \"__VITE_ASSET__655c9695__\"","import { fetchImages } from './js/pixabay-api'\nimport { createGalleryMarkup } from './js/render-functions';\nimport errorIcon from \"./img/x-octagon.svg\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-button\");\nconst imageLightbox = new SimpleLightbox('.gallery .gallery-link', {\n    captionsData: 'alt',\n}); \nlet current_page;\nlet current_query;\n\nfunction endListNotification(data, current_page) {\n    const currentHitsAmount = current_page * 15;\n                if (data.totalHits <= currentHitsAmount) {\n                    loadMoreBtn.classList.add('is-hidden');\n                    iziToast.warning({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        messageColor: '#fafafb',\n                        messageSize: '16px',\n                        backgroundColor: '#ef4040',\n                        theme: 'dark',\n                        maxWidth: '432px',\n                    })\n                }\n}\n\nsearchForm.addEventListener(\"submit\", onSubmit);\n\nloadMoreBtn.addEventListener('click', event => { \n    loader.classList.remove('is-hidden');\n    current_page++;\n    fetchImages(current_query, 15, current_page)\n        .then(data => {\n            endListNotification(data, current_page);\n            const markup = createGalleryMarkup(data.hits);\n            gallery.insertAdjacentHTML(\"beforeend\", markup);\n            imageLightbox.refresh();\n            const imageCard = document.querySelector('.gallery-item');\n            const rect = imageCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: rect * 2,\n                behavior: \"smooth\",\n            });\n        })\n        .catch(error => { \n            iziToast.error({\n                title: 'Error',\n                titleColor: '#fff',\n                message: 'Error while fetching images from Pixabay!',\n                messageColor: '#fafafb',\n                messageSize: '16px',\n                backgroundColor: '#ef4040',\n                theme: 'dark',\n                iconUrl: errorIcon,\n                maxWidth: '432px',\n            }) \n        })\n        .finally(() => {\n            loader.classList.add(\"is-hidden\");   \n        })\n})\n\nfunction onSubmit(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    current_page = 1;\n    loader.classList.remove(\"is-hidden\");\n    loadMoreBtn.classList.add('is-hidden');\n    const query = searchForm.elements.word.value.trim();\n    current_query = query;\n\n    if (!query) {\n        loader.classList.add(\"is-hidden\");\n        iziToast.error({\n                title: 'Error',\n                titleColor: '#fff',\n                message: 'Search query cannot be empty',\n                messageColor: '#fafafb',\n                messageSize: '16px',\n                backgroundColor: '#ef4040',\n                theme: 'dark',\n                iconUrl: errorIcon,\n                maxWidth: '432px',\n            });\n            searchForm.reset()\n            return;\n    }\n\n    fetchImages(query, 15, 1)\n        .then(data => {\n            const images = data.hits;\n            if (images.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: '#fafafb',\n                    messageSize: '16px',\n                    backgroundColor: '#ef4040',\n                    theme: 'dark',\n                    iconUrl: errorIcon,\n                    maxWidth: '432px',\n                })\n                searchForm.reset()\n                return;  \n            }\n            const markup = createGalleryMarkup(images);\n            gallery.insertAdjacentHTML(\"beforeend\", markup);\n            imageLightbox.refresh();\n            loadMoreBtn.classList.remove('is-hidden');\n            endListNotification(data, current_page);\n            searchForm.reset();\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                titleColor: '#fff',\n                message: 'Error while fetching images from Pixabay!',\n                messageColor: '#fafafb',\n                messageSize: '16px',\n                backgroundColor: '#ef4040',\n                theme: 'dark',\n                iconUrl: errorIcon,\n                maxWidth: '432px',\n            })   \n        })\n        .finally(() => {\n            loader.classList.add(\"is-hidden\");   \n        })\n} "],"names":["fetchImages","query","per_page","page","LINK","axios","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorIcon$1","searchForm","gallery","loader","loadMoreBtn","imageLightbox","SimpleLightbox","current_page","current_query","endListNotification","data","currentHitsAmount","iziToast","onSubmit","event","markup","rect","error","errorIcon"],"mappings":"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"}